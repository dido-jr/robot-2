<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robot-2: Mobile Robot - Ros</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Robot-2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Mobile Robot - Ros </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Research track 1 - Assignment 2</h1>
<p>In this repo is implemented the bug0 algorithm for a mobile robot in Rviz, a tool for ROS Visualization, and Gazebo, the 3D simulator for ROS. There are also other nodes to retrieve some important information from the simulation.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installing and running</h1>
<p>Once the environment is installed and the repository has been cloned, run: </p><div class="fragment"><div class="line">$ catkin_make</div>
</div><!-- fragment --><p>in your root folder then: </p><div class="fragment"><div class="line">$ roslaunch assignment_2_2023 assignment1.launch</div>
</div><!-- fragment --><p>If you want to call the implemented service just run: </p><div class="fragment"><div class="line">$ rosservice call /dist_speed</div>
</div><!-- fragment --><p>and </p><div class="fragment"><div class="line">$ rosservice call /last_target</div>
</div><!-- fragment --><p>While the data published on the topic are visible running: </p><div class="fragment"><div class="line">$ rostopic echo /Pos_vel</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
Node A</h2>
<p>The node <code><a class="el" href="aclient_8cpp.html" title="implementation of action client, subscriber and publisher to deal with goal, velocity and position">aclient.cpp</a></code> implements an action client that: *allows the user to set a target: </p><div class="fragment"><div class="line">-request x coordinate</div>
<div class="line">-request y coordinate</div>
<div class="line">-fill the fields of the goal section of the Plannin.action file  with x and y</div>
<div class="line">-send the goal to the action server</div>
</div><!-- fragment --><p>*allows the user to cancel a target: </p><div class="fragment"><div class="line">-ask whether to cancel the target</div>
<div class="line">-if the input is different from the expected re-ask the input</div>
<div class="line">-if the user want to cancel the target and it is not yet been reached, cancel the target    </div>
</div><!-- fragment --><p>*Use the status of the action server to know when the target has been reached: </p><div class="fragment"><div class="line">-wait for the result</div>
<div class="line">-if status == &quot;SUCCEEDED&quot;, then the target has been reached  </div>
</div><!-- fragment --><p>The above sections of code are inside an infinite while loop, so that when a target is reached then you may be asked to enter a new one. Furthermore, this functions are implemented with threads in a such way that, the publishers and the subsribers, that are in the main function, cannot be bothered by waiting for the task to complete. Also the request to cancel the target is in a separate thread to avoid blocking the program waiting for the input, infact in this case if the robot reached the target, the program would not be aware of it and the user could delete a target already reached. *The node also publishes the robot position and velocity as a custom message (x,y, vel_x, vel_z), by relying on the values published on the topic /odom: </p><div class="fragment"><div class="line">-initialization of the subscriber for the topic odom</div>
<div class="line">-initialization of the publisher </div>
<div class="line"> </div>
<div class="line">callback of the subscriber:</div>
<div class="line">-fill the custom message fields with the of the message of type Odometry</div>
</div><!-- fragment --><p>The custom message Pos_vel.msg has been constructed to accept four float values corresponding to (x,y, vel_x, vel_z)</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Node B</h2>
<p>The node <code><a class="el" href="last__target_8cpp.html" title="service node to retrieve informations of the target">last_target.cpp</a></code> when called, returns the coordinates of the last target sent by the user, subscribing the goal topic of the actionLib and pushing its fields in the service /last_target.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Node C</h2>
<p>The node <a class="el" href="dist__speed_8cpp.html" title="Service node to retrieve informations about the position and the speed of the robot.">dist_speed.cpp</a> subscribes the robot's position and velocity (using the custom message) and implements a server to retrieve the distance of the robot from the target and the robot's average speed.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
RQT_Graph</h2>
<p>The ros graph of the application showing nodes and topics:</p>
<p><img src="/src/rosgraph.png" alt="Testo alternativo" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
